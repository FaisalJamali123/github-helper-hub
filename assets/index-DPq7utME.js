import{g as de}from"./index-7mY-mCsE.js";function pe(n,o){for(var s=0;s<o.length;s++){const l=o[s];if(typeof l!="string"&&!Array.isArray(l)){for(const h in l)if(h!=="default"&&!(h in n)){const w=Object.getOwnPropertyDescriptor(l,h);w&&Object.defineProperty(n,h,w.get?w:{enumerable:!0,get:()=>l[h]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var he={exports:{}};(function(n){var o=function(s){var l=Object.prototype,h=l.hasOwnProperty,w=Object.defineProperty||function(t,e,r){t[e]=r.value},g,m=typeof Symbol=="function"?Symbol:{},E=m.iterator||"@@iterator",W=m.asyncIterator||"@@asyncIterator",j=m.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch{d=function(e,r,i){return e[r]=i}}function v(t,e,r,i){var a=e&&e.prototype instanceof B?e:B,f=Object.create(a.prototype),y=new K(i||[]);return w(f,"_invoke",{value:V(t,r,y)}),f}s.wrap=v;function A(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(i){return{type:"throw",arg:i}}}var R="suspendedStart",N="suspendedYield",$="executing",b="completed",p={};function B(){}function M(){}function _(){}var F={};d(F,E,function(){return this});var z=Object.getPrototypeOf,C=z&&z(z(c([])));C&&C!==l&&h.call(C,E)&&(F=C);var T=_.prototype=B.prototype=Object.create(F);M.prototype=_,w(T,"constructor",{value:_,configurable:!0}),w(_,"constructor",{value:M,configurable:!0}),M.displayName=d(_,j,"GeneratorFunction");function G(t){["next","throw","return"].forEach(function(e){d(t,e,function(r){return this._invoke(e,r)})})}s.isGeneratorFunction=function(t){var e=typeof t=="function"&&t.constructor;return e?e===M||(e.displayName||e.name)==="GeneratorFunction":!1},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,d(t,j,"GeneratorFunction")),t.prototype=Object.create(T),t},s.awrap=function(t){return{__await:t}};function D(t,e){function r(f,y,L,S){var k=A(t[f],t,y);if(k.type==="throw")S(k.arg);else{var Q=k.arg,H=Q.value;return H&&typeof H=="object"&&h.call(H,"__await")?e.resolve(H.__await).then(function(P){r("next",P,L,S)},function(P){r("throw",P,L,S)}):e.resolve(H).then(function(P){Q.value=P,L(Q)},function(P){return r("throw",P,L,S)})}}var i;function a(f,y){function L(){return new e(function(S,k){r(f,y,S,k)})}return i=i?i.then(L,L):L()}w(this,"_invoke",{value:a})}G(D.prototype),d(D.prototype,W,function(){return this}),s.AsyncIterator=D,s.async=function(t,e,r,i,a){a===void 0&&(a=Promise);var f=new D(v(t,e,r,i),a);return s.isGeneratorFunction(e)?f:f.next().then(function(y){return y.done?y.value:f.next()})};function V(t,e,r){var i=R;return function(f,y){if(i===$)throw new Error("Generator is already running");if(i===b){if(f==="throw")throw y;return u()}for(r.method=f,r.arg=y;;){var L=r.delegate;if(L){var S=J(L,r);if(S){if(S===p)continue;return S}}if(r.method==="next")r.sent=r._sent=r.arg;else if(r.method==="throw"){if(i===R)throw i=b,r.arg;r.dispatchException(r.arg)}else r.method==="return"&&r.abrupt("return",r.arg);i=$;var k=A(t,e,r);if(k.type==="normal"){if(i=r.done?b:N,k.arg===p)continue;return{value:k.arg,done:r.done}}else k.type==="throw"&&(i=b,r.method="throw",r.arg=k.arg)}}}function J(t,e){var r=e.method,i=t.iterator[r];if(i===g)return e.delegate=null,r==="throw"&&t.iterator.return&&(e.method="return",e.arg=g,J(t,e),e.method==="throw")||r!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var a=A(i,t.iterator,e.arg);if(a.type==="throw")return e.method="throw",e.arg=a.arg,e.delegate=null,p;var f=a.arg;if(!f)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p;if(f.done)e[t.resultName]=f.value,e.next=t.nextLoc,e.method!=="return"&&(e.method="next",e.arg=g);else return f;return e.delegate=null,p}G(T),d(T,j,"Generator"),d(T,E,function(){return this}),d(T,"toString",function(){return"[object Generator]"});function Z(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function Y(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function K(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(Z,this),this.reset(!0)}s.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function a(){for(;r.length;){var f=r.pop();if(f in e)return a.value=f,a.done=!1,a}return a.done=!0,a}};function c(t){if(t){var e=t[E];if(e)return e.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length)){var r=-1,i=function a(){for(;++r<t.length;)if(h.call(t,r))return a.value=t[r],a.done=!1,a;return a.value=g,a.done=!0,a};return i.next=i}}return{next:u}}s.values=c;function u(){return{value:g,done:!0}}return K.prototype={constructor:K,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(Y),!t)for(var e in this)e.charAt(0)==="t"&&h.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(S,k){return f.type="throw",f.arg=t,e.next=S,k&&(e.method="next",e.arg=g),!!k}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],f=a.completion;if(a.tryLoc==="root")return r("end");if(a.tryLoc<=this.prev){var y=h.call(a,"catchLoc"),L=h.call(a,"finallyLoc");if(y&&L){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(y){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else if(L){if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&h.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&(t==="break"||t==="continue")&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var f=a?a.completion:{};return f.type=t,f.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(f)},complete:function(t,e){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),Y(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if(i.type==="throw"){var a=i.arg;Y(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:c(t),resultName:e,nextLoc:r},this.method==="next"&&(this.arg=g),p}},s}(n.exports);try{regeneratorRuntime=o}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}})(he);var ee=(n,o)=>`${n}-${o}-${Math.random().toString(16).slice(3,8)}`;const ge=ee;let re=0;var se=({id:n,action:o,payload:s={}})=>{let l=n;return typeof l>"u"&&(l=ge("Job",re),re+=1),{id:l,action:o,payload:s}},U={};let te=!1;U.logging=te;U.setLogging=n=>{te=n};U.log=(...n)=>te?console.log.apply(void 0,n):null;const me=se,{log:q}=U,ve=ee;let ne=0;var ye=()=>{const n=ve("Scheduler",ne),o={},s={};let l=[];ne+=1;const h=()=>l.length,w=()=>Object.keys(o).length,g=()=>{if(l.length!==0){const d=Object.keys(o);for(let v=0;v<d.length;v+=1)if(typeof s[d[v]]>"u"){l[0](o[d[v]]);break}}},m=(d,v)=>new Promise((A,R)=>{const N=me({action:d,payload:v});l.push(async $=>{l.shift(),s[$.id]=N;try{A(await $[d].apply(void 0,[...v,N.id]))}catch(b){R(b)}finally{delete s[$.id],g()}}),q(`[${n}]: Add ${N.id} to JobQueue`),q(`[${n}]: JobQueue length=${l.length}`),g()});return{addWorker:d=>(o[d.id]=d,q(`[${n}]: Add ${d.id}`),q(`[${n}]: Number of workers=${w()}`),g(),d.id),addJob:async(d,...v)=>{if(w()===0)throw Error(`[${n}]: You need to have at least one worker before adding jobs`);return m(d,v)},terminate:async()=>{Object.keys(o).forEach(async d=>{await o[d].terminate()}),l=[]},getQueueLen:h,getNumWorkers:w}};function we(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var be=n=>{const o={};return typeof WorkerGlobalScope<"u"?o.type="webworker":typeof document=="object"?o.type="browser":typeof process=="object"&&typeof we=="function"&&(o.type="node"),typeof n>"u"?o:o[n]};const Le=be("type")==="browser",ke=Le?n=>new URL(n,window.location.href).href:n=>n;var Se=n=>{const o={...n};return["corePath","workerPath","langPath"].forEach(s=>{n[s]&&(o[s]=ke(o[s]))}),o},ce={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const Ee="tesseract.js",Oe="7.0.0",Ae="Pure Javascript Multilingual OCR",_e="src/index.js",Te="commonjs",je="src/index.d.ts",$e="dist/tesseract.min.js",Re="dist/tesseract.min.js",Ne={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser test:node:all","test:browser":"karma start karma.conf.js","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.mjs","test:node:all":"npm run test:node -- ./tests/*.test.mjs",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},Pe={"./src/worker/node/index.js":"./src/worker/browser/index.js"},Ie="",Me=["jeromewu"],Ce="Apache-2.0",Ge={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","npm-run-all":"^4.1.5",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-webpack":"^5.0.0",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},De={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^7.0.0","wasm-feature-detect":"^1.8.0",zlibjs:"^0.3.1"},Ue={"@rollup/pluginutils":"^5.0.2"},We={type:"git",url:"https://github.com/naptha/tesseract.js.git"},Be={url:"https://github.com/naptha/tesseract.js/issues"},Fe="https://github.com/naptha/tesseract.js",ze={type:"opencollective",url:"https://opencollective.com/tesseractjs"},Ye={name:Ee,version:Oe,description:Ae,main:_e,type:Te,types:je,unpkg:$e,jsdelivr:Re,scripts:Ne,browser:Pe,author:Ie,contributors:Me,license:Ce,devDependencies:Ge,dependencies:De,overrides:Ue,repository:We,bugs:Be,homepage:Fe,collective:ze};var Ke={workerBlobURL:!0,logger:()=>{}};const He=Ye.version,Je=Ke;var qe={...Je,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${He}/dist/worker.min.js`},Ve=({workerPath:n,workerBlobURL:o})=>{let s;if(Blob&&URL&&o){const l=new Blob([`importScripts("${n}");`],{type:"application/javascript"});s=new Worker(URL.createObjectURL(l))}else s=new Worker(n);return s},Ze=n=>{n.terminate()},Qe=(n,o)=>{n.onmessage=({data:s})=>{o(s)}},Xe=async(n,o)=>{n.postMessage(o)};const X=n=>new Promise((o,s)=>{const l=new FileReader;l.onload=()=>{o(l.result)},l.onerror=({target:{error:{code:h}}})=>{s(Error(`File could not be read! Code=${h}`))},l.readAsArrayBuffer(n)}),x=async n=>{let o=n;if(typeof n>"u")return"undefined";if(typeof n=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(n)?o=atob(n.split(",")[1]).split("").map(s=>s.charCodeAt(0)):o=await(await fetch(n)).arrayBuffer();else if(typeof HTMLElement<"u"&&n instanceof HTMLElement)n.tagName==="IMG"&&(o=await x(n.src)),n.tagName==="VIDEO"&&(o=await x(n.poster)),n.tagName==="CANVAS"&&await new Promise(s=>{n.toBlob(async l=>{o=await X(l),s()})});else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas){const s=await n.convertToBlob();o=await X(s)}else(n instanceof File||n instanceof Blob)&&(o=await X(n));return new Uint8Array(o)};var xe=x;const et=qe,tt=Ve,rt=Ze,nt=Qe,ot=Xe,at=xe;var it={defaultOptions:et,spawnWorker:tt,terminateWorker:rt,onMessage:nt,send:ot,loadImage:at};const st=Se,O=se,{log:oe}=U,ct=ee,I=ce,{defaultOptions:lt,spawnWorker:ut,terminateWorker:ft,onMessage:dt,loadImage:ae,send:pt}=it;let ie=0;var le=async(n="eng",o=I.LSTM_ONLY,s={},l={})=>{const h=ct("Worker",ie),{logger:w,errorHandler:g,...m}=st({...lt,...s}),E={},W=typeof n=="string"?n.split("+"):n;let j=o,d=l;const v=[I.DEFAULT,I.LSTM_ONLY].includes(o)&&!m.legacyCore;let A,R;const N=new Promise((c,u)=>{R=c,A=u}),$=c=>{A(c.message)};let b=ut(m);b.onerror=$,ie+=1;const p=({id:c,action:u,payload:t})=>new Promise((e,r)=>{oe(`[${h}]: Start ${c}, action=${u}`);const i=`${u}-${c}`;E[i]={resolve:e,reject:r},pt(b,{workerId:h,jobId:c,action:u,payload:t})}),B=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),M=c=>p(O({id:c,action:"load",payload:{options:{lstmOnly:v,corePath:m.corePath,logging:m.logging}}})),_=(c,u,t)=>p(O({id:t,action:"FS",payload:{method:"writeFile",args:[c,u]}})),F=(c,u)=>p(O({id:u,action:"FS",payload:{method:"readFile",args:[c,{encoding:"utf8"}]}})),z=(c,u)=>p(O({id:u,action:"FS",payload:{method:"unlink",args:[c]}})),C=(c,u,t)=>p(O({id:t,action:"FS",payload:{method:c,args:u}})),T=(c,u)=>p(O({id:u,action:"loadLanguage",payload:{langs:c,options:{langPath:m.langPath,dataPath:m.dataPath,cachePath:m.cachePath,cacheMethod:m.cacheMethod,gzip:m.gzip,lstmOnly:[I.DEFAULT,I.LSTM_ONLY].includes(j)&&!m.legacyLang}}})),G=(c,u,t,e)=>p(O({id:e,action:"initialize",payload:{langs:c,oem:u,config:t}})),D=(c="eng",u,t,e)=>{if(v&&[I.TESSERACT_ONLY,I.TESSERACT_LSTM_COMBINED].includes(u))throw Error("Legacy model requested but code missing.");const r=u||j;j=r;const i=t||d;d=i;const f=(typeof c=="string"?c.split("+"):c).filter(y=>!W.includes(y));return W.push(...f),f.length>0?T(f,e).then(()=>G(c,r,i,e)):G(c,r,i,e)},V=(c={},u)=>p(O({id:u,action:"setParameters",payload:{params:c}})),J=async(c,u={},t={text:!0},e)=>p(O({id:e,action:"recognize",payload:{image:await ae(c),options:u,output:t}})),Z=async(c,u)=>{if(v)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return p(O({id:u,action:"detect",payload:{image:await ae(c)}}))},Y=async()=>(b!==null&&(ft(b),b=null),Promise.resolve());dt(b,({workerId:c,jobId:u,status:t,action:e,data:r})=>{const i=`${e}-${u}`;if(t==="resolve")oe(`[${c}]: Complete ${u}`),E[i].resolve({jobId:u,data:r}),delete E[i];else if(t==="reject")if(E[i].reject(r),delete E[i],e==="load"&&A(r),g)g(r);else throw Error(r);else t==="progress"&&w({...r,userJobId:u})});const K={id:h,worker:b,load:B,writeText:_,readText:F,removeFile:z,FS:C,reinitialize:D,setParameters:V,recognize:J,detect:Z,terminate:Y};return M().then(()=>T(n)).then(()=>G(n,o,l)).then(()=>R(K)).catch(()=>{}),N};const ue=le,ht=async(n,o,s)=>{const l=await ue(o,1,s);return l.recognize(n).finally(async()=>{await l.terminate()})},gt=async(n,o)=>{const s=await ue("osd",0,o);return s.detect(n).finally(async()=>{await s.terminate()})};var mt={recognize:ht,detect:gt},vt={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},yt={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const wt=ye,bt=le,Lt=mt,kt=vt,St=ce,Et=yt,{setLogging:Ot}=U;var fe={languages:kt,OEM:St,PSM:Et,createScheduler:wt,createWorker:bt,setLogging:Ot,...Lt};const At=de(fe),Tt=pe({__proto__:null,default:At},[fe]);export{Tt as i};
